
<dashboard version="2" theme="dark">
    <label>Deployment Server Status</label>
    <description>Checks whether DS and DC communication authentication is enabled.</description>
    <definition><![CDATA[
{
	"visualizations": {
		"viz_nqcAGAEF": {
			"type": "splunk.table",
			"title": "Deployment Server and Clients",
			"dataSources": {
				"primary": "ds_IbFHNv7o"
			},
			"options": {
				"showInternalFields": false
			},
			"description": "listing only Splunk Enterprise instances"
		},
		"viz_SdkYRsVU": {
			"type": "splunk.table",
			"dataSources": {
				"primary": "ds_9rqXtGh9"
			},
			"title": "Deployment Server Config",
			"description": "",
			"options": {
				"columnFormat": {
					"requireAuthentication": {
						"data": "> table | seriesByName(\"requireAuthentication\") | formatByType(requireAuthenticationColumnFormatEditorConfig)",
						"rowColors": "> table | seriesByName('requireAuthentication') | pick(requireAuthenticationRowColorsEditorConfig)",
						"rowBackgroundColors": "> table | seriesByName('requireAuthentication') | rangeValue(requireAuthenticationRowBackgroundColorsEditorConfig)"
					}
				},
				"showInternalFields": false
			},
			"context": {
				"requireAuthenticationColumnFormatEditorConfig": {
					"number": {
						"thousandSeparated": false,
						"unitPosition": "after"
					}
				},
				"requireAuthenticationRowColorsEditorConfig": [
					"#ffffff"
				],
				"requireAuthenticationRowBackgroundColorsEditorConfig": [
					{
						"value": "#D41F1F",
						"to": 1
					},
					{
						"value": "#118832",
						"from": 1
					}
				]
			}
		},
		"viz_wtrhhVSR": {
			"type": "splunk.table",
			"dataSources": {
				"primary": "ds_xDGbHBit"
			},
			"title": "Universal Forwarder Management Port",
			"description": "This search looks for a server.conf in your deployment-apps directory with disableDefaultPort=\"true\". If nothing was found, all your UFs probably have their 8089 up and running.",
			"options": {
				"columnFormat": {
					"disabledDefaultPort": {
						"data": "> table | seriesByName(\"disabledDefaultPort\") | formatByType(disabledDefaultPortColumnFormatEditorConfig)",
						"rowColors": "> table | seriesByName('disabledDefaultPort') | pick(disabledDefaultPortRowColorsEditorConfig)",
						"rowBackgroundColors": "> table | seriesByName(\"disabledDefaultPort\") | matchValue(disabledDefaultPortRowBackgroundColorsEditorConfig)"
					},
					"disableDefaultPort": {
						"data": "> table | seriesByName(\"disableDefaultPort\") | formatByType(disableDefaultPortColumnFormatEditorConfig)",
						"rowColors": "> table | seriesByName('disableDefaultPort') | pick(disableDefaultPortRowColorsEditorConfig)",
						"rowBackgroundColors": "> table | seriesByName(\"disableDefaultPort\") | matchValue(disableDefaultPortRowBackgroundColorsEditorConfig)"
					}
				}
			},
			"context": {
				"disabledDefaultPortColumnFormatEditorConfig": {
					"string": {
						"unitPosition": "after"
					}
				},
				"disabledDefaultPortRowColorsEditorConfig": [
					"#ffffff"
				],
				"disabledDefaultPortRowBackgroundColorsEditorConfig": [
					{
						"match": "",
						"value": "#78062a"
					},
					{
						"match": "true",
						"value": "#2f8811"
					}
				],
				"disableDefaultPortColumnFormatEditorConfig": {
					"string": {
						"unitPosition": "after"
					}
				},
				"disableDefaultPortRowColorsEditorConfig": [
					"#ffffff"
				],
				"disableDefaultPortRowBackgroundColorsEditorConfig": [
					{
						"match": "",
						"value": "#78062a"
					},
					{
						"match": "true",
						"value": "#2f8811"
					}
				]
			}
		}
	},
	"dataSources": {
		"ds_9rqXtGh9": {
			"type": "ds.search",
			"options": {
				"query": "index=\"app_eavc\" sourcetype=\"eavc:mc_ds_auth\" \n| fields server, stanza, config, requireAuthentication \n|  table server, stanza, config, requireAuthentication \n| rename stanza AS Stanza, server AS Host,\n",
				"queryParameters": {
					"earliest": "$tok_time.earliest$",
					"latest": "$tok_time.latest$"
				}
			},
			"name": "get_broker_status"
		},
		"ds_qY4GPnDg": {
			"type": "ds.search",
			"options": {
				"query": "index=\"app_eavc\" sourcetype=\"eavc:mc_server_roles\" | fields server, roles ",
				"queryParameters": {
					"earliest": "$tok_time.earliest$",
					"latest": "$tok_time.latest$"
				}
			},
			"name": "query_server_roles_sourcetype"
		},
		"ds_IbFHNv7o": {
			"type": "ds.chain",
			"options": {
				"extend": "ds_qY4GPnDg",
				"query": "| where roles LIKE \"deployment_server\" OR roles LIKE \"deployment_client\"\n| stats values(server) AS Host by roles\n|  sort -roles\n|  rename roles AS Role\n"
			},
			"name": "get_ds_dc"
		},
		"ds_xDGbHBit": {
			"type": "ds.search",
			"options": {
				"query": "index=\"app_eavc\" sourcetype=\"eavc:uf_mgmt\" disableDefaultPort=\"true\" \n| stats latest(disableDefaultPort) AS disableDefaultPort by host\n|  rename host AS Host",
				"queryParameters": {
					"earliest": "$tok_time.earliest$",
					"latest": "$tok_time.latest$"
				}
			},
			"name": "get_uf_Mgmt_port"
		}
	},
	"defaults": {
		"dataSources": {
			"ds.search": {
				"options": {
					"queryParameters": {
						"latest": "$global_time.latest$",
						"earliest": "$global_time.earliest$"
					}
				}
			}
		}
	},
	"inputs": {
		"input_global_trp": {
			"type": "input.timerange",
			"options": {
				"token": "tok_time",
				"defaultValue": "-7d@h,now"
			},
			"title": "Time Range"
		}
	},
	"layout": {
		"type": "grid",
		"options": {},
		"structure": [
			{
				"item": "viz_nqcAGAEF",
				"type": "block",
				"position": {
					"x": 0,
					"y": 0,
					"w": 600,
					"h": 400
				}
			},
			{
				"item": "viz_SdkYRsVU",
				"type": "block",
				"position": {
					"x": 600,
					"y": 0,
					"w": 600,
					"h": 400
				}
			},
			{
				"item": "viz_wtrhhVSR",
				"type": "block",
				"position": {
					"x": 0,
					"y": 400,
					"w": 1200,
					"h": 400
				}
			}
		],
		"globalInputs": [
			"input_global_trp"
		]
	},
	"description": "Checks whether DS and DC communication authentication is enabled.",
	"title": "Deployment Server Status"
}
    ]]></definition>
    <meta type="hiddenElements"><![CDATA[
{
	"hideEdit": false,
	"hideOpenInSearch": false,
	"hideExport": true
}
    ]]></meta>
</dashboard>